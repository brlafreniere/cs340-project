<%- contentFor('content') %>

<div class="border p-3 mt-3">
  <form method="POST" action="/flights/<%= flight.flight_id %>/update">
    <legend><strong>Editing Flight No. <%= flight.flight_id %></strong></legend>

    <div class="row">
      <div class="col">
        <label>Plane</label>
        <select name="plane_id" class="form-select">
          <% for (const plane of planes) { %>
            <option value="<%= plane.plane_id %>" <%= flight.plane_id == plane.plane_id ? "selected" : null %>>
              #<%= plane.plane_id %>
              <%= plane.model_name %>
            </option>
          <% } %>
        </select>
      </div>

      <div class="col">
        <label>Departure</label>
        <input type="datetime-local" name="departure_time" class="form-control" value="<%= flight.departure_time %>" />
      </div>

      <div class="col">
        <label>Arrival</label>
        <input type="datetime-local" name="arrival_time" class="form-control" value="<%= flight.arrival_time %>" />
      </div>
    </div>

    <div class="row mt-3">
      <div class="col">
        <label>Pilots (Select Multiple)</label>
        <select name="pilot_ids" class="form-control" multiple>
          <% for (const pilot of pilots) { %>
            <option value="<%= pilot.pilot_id %>" <%= assigned_pilot_ids.includes(pilot.pilot_id) ? 'selected' : null %>>
              <%= pilot.first_name %>
              <%= pilot.last_name %>
            </option>
          <% } %>
        </select>
      </div>
    </div>

    <div class="col">
      <div class="mt-3">
        <input class="btn btn-primary" type="submit" value="Save">
        <input class="btn btn-secondary" type="button" value="Cancel" onClick="javascript:history.back()">
      </div>
    </div>
  </form>
</div>